(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90dafe38"],{"0b59":function(t,e,a){"use strict";a("1a52")},"0f39":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture",multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过10MB")])],1),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},r=[],n=(a("d3b7"),a("b0c0"),a("6e0d")),l={name:"SingleUpload",props:{value:{type:String,default:""}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,useOss:!1,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"/minio/upload"}},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},fileList:function(){return[{name:this.imageName,url:this.imageUrl}]},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},methods:{emitInput:function(t){this.$emit("input",t)},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return!this.useOss||new Promise((function(t,a){Object(n["a"])().then((function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)})).catch((function(t){console.log(t),a(!1)}))}))},handleUploadSuccess:function(t,e){this.showFileList=!0,this.fileList.pop();var a=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(a=t.data.url),this.fileList.push({name:e.name,url:a}),this.emitInput(this.fileList[0].url)}}},u=l,o=a("2877"),s=Object(o["a"])(u,i,r,!1,null,null,null);e["a"]=s.exports},"1a52":function(t,e,a){},2851:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"form-container",staticStyle:{margin:"50px auto"},attrs:{shadow:"never"}},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"填写商品信息"}}),a("el-step",{attrs:{title:"填写商品促销"}}),a("el-step",{attrs:{title:"填写商品属性"}}),a("el-step",{attrs:{title:"选择商品关联"}})],1),a("product-info-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),a("product-sale-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),a("product-attr-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[2],expression:"showStatus[2]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),a("product-relation-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[3],expression:"showStatus[3]"}],attrs:{"is-edit":t.isEdit},on:{prevStep:t.prevStep,finishCommit:t.finishCommit},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}})],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productInfoForm",staticStyle:{width:"600px"},attrs:{model:t.value,rules:t.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"商品分类：",prop:"productCategoryId"}},[a("el-cascader",{attrs:{options:t.productCateOptions},model:{value:t.selectProductCateValue,callback:function(e){t.selectProductCateValue=e},expression:"selectProductCateValue"}})],1),a("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[a("el-input",{model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),a("el-form-item",{attrs:{label:"副标题：",prop:"subTitle"}},[a("el-input",{model:{value:t.value.subTitle,callback:function(e){t.$set(t.value,"subTitle",e)},expression:"value.subTitle"}})],1),a("el-form-item",{attrs:{label:"商品品牌：",prop:"brandId"}},[a("el-select",{attrs:{placeholder:"请选择品牌"},on:{change:t.handleBrandChange},model:{value:t.value.brandId,callback:function(e){t.$set(t.value,"brandId",e)},expression:"value.brandId"}},t._l(t.brandOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"商品介绍："}},[a("el-input",{attrs:{"auto-size":!0,type:"textarea",placeholder:"请输入内容"},model:{value:t.value.description,callback:function(e){t.$set(t.value,"description",e)},expression:"value.description"}})],1),a("el-form-item",{attrs:{label:"商品货号："}},[a("el-input",{model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),a("el-form-item",{attrs:{label:"商品售价："}},[a("el-input",{model:{value:t.value.price,callback:function(e){t.$set(t.value,"price",e)},expression:"value.price"}})],1),a("el-form-item",{attrs:{label:"市场价："}},[a("el-input",{model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),a("el-form-item",{attrs:{label:"商品库存："}},[a("el-input",{model:{value:t.value.stock,callback:function(e){t.$set(t.value,"stock",e)},expression:"value.stock"}})],1),a("el-form-item",{attrs:{label:"计量单位："}},[a("el-input",{model:{value:t.value.unit,callback:function(e){t.$set(t.value,"unit",e)},expression:"value.unit"}})],1),a("el-form-item",{attrs:{label:"商品重量："}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.value.weight,callback:function(e){t.$set(t.value,"weight",e)},expression:"value.weight"}}),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("克")])],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.value.sort,callback:function(e){t.$set(t.value,"sort",e)},expression:"value.sort"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.handleNext("productInfoForm")}}},[t._v("下一步，填写商品促销")])],1)],1)],1)},l=[],u=a("1da1"),o=(a("96cf"),a("b0c0"),a("d1f3")),s=a("9add"),c={name:"ProductInfoDetail",props:{value:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,selectProductCateValue:[],productCateOptions:[],brandOptions:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],subTitle:[{required:!0,message:"请输入商品副标题",trigger:"blur"}],productCategoryId:[{required:!0,message:"请选择商品分类",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],description:[{required:!0,message:"请输入商品介绍",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}},computed:{productId:function(){return this.value.id}},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())},selectProductCateValue:function(t){null!=t&&2===t.length?(this.value.productCategoryId=t[1],this.value.productCategoryName=this.getCateNameById(this.value.productCategoryId)):(this.value.productCategoryId=null,this.value.productCategoryName=null)}},created:function(){this.getProductCateList(),this.getBrandList()},methods:{handleEditCreated:function(){null!=this.value.productCategoryId&&(this.selectProductCateValue=[this.value.cateParentId,this.value.productCategoryId]),this.hasEditCreated=!0},getProductCateList:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["d"])().then((function(e){var a=e.data;t.productCateOptions=[];for(var i=0;i<a.length;i++){var r=[];if(null!=a[i].children&&a[i].children.length>0)for(var n=0;n<a[i].children.length;n++)r.push({label:a[i].children[n].name,value:a[i].children[n].id});t.productCateOptions.push({label:a[i].name,value:a[i].id,children:r})}}));case 2:case"end":return e.stop()}}),e)})))()},getBrandList:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])({pageNum:1,pageSize:100}).then((function(e){t.brandOptions=[];for(var a=e.data.list,i=0;i<a.length;i++)t.brandOptions.push({label:a[i].name,value:a[i].id})}));case 2:case"end":return e.stop()}}),e)})))()},getCateNameById:function(t){for(var e=null,a=0;a<this.productCateOptions.length;a++)for(var i=0;i<this.productCateOptions[a].children.length;i++)if(this.productCateOptions[a].children[i].value===t)return e=this.productCateOptions[a].children[i].label,e;return e},handleNext:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;e.$emit("nextStep")}))},handleBrandChange:function(t){for(var e="",a=0;a<this.brandOptions.length;a++)if(this.brandOptions[a].value===t){e=this.brandOptions[a].label;break}this.value.brandName=e}}},d=c,p=a("2877"),h=Object(p["a"])(d,n,l,!1,null,"7101d9e9",null),m=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productSaleForm",staticStyle:{width:"600px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"赠送积分："}},[a("el-input",{model:{value:t.value.giftPoint,callback:function(e){t.$set(t.value,"giftPoint",e)},expression:"value.giftPoint"}})],1),a("el-form-item",{attrs:{label:"赠送成长值："}},[a("el-input",{model:{value:t.value.giftGrowth,callback:function(e){t.$set(t.value,"giftGrowth",e)},expression:"value.giftGrowth"}})],1),a("el-form-item",{attrs:{label:"积分购买限制："}},[a("el-input",{model:{value:t.value.usePointLimit,callback:function(e){t.$set(t.value,"usePointLimit",e)},expression:"value.usePointLimit"}})],1),a("el-form-item",{attrs:{label:"预告商品："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.previewStatus,callback:function(e){t.$set(t.value,"previewStatus",e)},expression:"value.previewStatus"}})],1),a("el-form-item",{attrs:{label:"商品上架："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.publishStatus,callback:function(e){t.$set(t.value,"publishStatus",e)},expression:"value.publishStatus"}})],1),a("el-form-item",{attrs:{label:"商品推荐："}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("新品")]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.newStatus,callback:function(e){t.$set(t.value,"newStatus",e)},expression:"value.newStatus"}}),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("推荐")]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}})],1),a("el-form-item",{attrs:{label:"服务保证："}},[a("el-checkbox-group",{model:{value:t.selectServiceList,callback:function(e){t.selectServiceList=e},expression:"selectServiceList"}},[a("el-checkbox",{attrs:{label:1}},[t._v("无忧退货")]),a("el-checkbox",{attrs:{label:2}},[t._v("快速退款")]),a("el-checkbox",{attrs:{label:3}},[t._v("免费包邮")])],1)],1),a("el-form-item",{attrs:{label:"详细页标题："}},[a("el-input",{model:{value:t.value.detailTitle,callback:function(e){t.$set(t.value,"detailTitle",e)},expression:"value.detailTitle"}})],1),a("el-form-item",{attrs:{label:"详细页描述："}},[a("el-input",{model:{value:t.value.detailDesc,callback:function(e){t.$set(t.value,"detailDesc",e)},expression:"value.detailDesc"}})],1),a("el-form-item",{attrs:{label:"商品关键字："}},[a("el-input",{model:{value:t.value.keywords,callback:function(e){t.$set(t.value,"keywords",e)},expression:"value.keywords"}})],1),a("el-form-item",{attrs:{label:"商品备注："}},[a("el-input",{attrs:{type:"textarea","auto-size":!0},model:{value:t.value.note,callback:function(e){t.$set(t.value,"note",e)},expression:"value.note"}})],1),a("el-form-item",{attrs:{label:"选择优惠方式："}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.value.promotionType,callback:function(e){t.$set(t.value,"promotionType",e)},expression:"value.promotionType"}},[a("el-radio-button",{attrs:{label:0}},[t._v("无优惠")]),a("el-radio-button",{attrs:{label:1}},[t._v("特惠促销")]),a("el-radio-button",{attrs:{label:2}},[t._v("会员价格")]),a("el-radio-button",{attrs:{label:3}},[t._v("阶梯价格")]),a("el-radio-button",{attrs:{label:4}},[t._v("满减价格")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===t.value.promotionType,expression:"value.promotionType===1"}]},[a("div",[t._v(" 开始时间： "),a("el-date-picker",{attrs:{type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择开始时间"},model:{value:t.value.promotionStartTime,callback:function(e){t.$set(t.value,"promotionStartTime",e)},expression:"value.promotionStartTime"}})],1),a("div",{staticClass:"littleMargin"},[t._v(" 结束时间： "),a("el-date-picker",{attrs:{type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择结束时间"},model:{value:t.value.promotionEndTime,callback:function(e){t.$set(t.value,"promotionEndTime",e)},expression:"value.promotionEndTime"}})],1),a("div",{staticClass:"littleMargin"},[t._v(" 促销价格： "),a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"输入促销价格"},model:{value:t.value.promotionPrice,callback:function(e){t.$set(t.value,"promotionPrice",e)},expression:"value.promotionPrice"}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===t.value.promotionType,expression:"value.promotionType===2"}]},t._l(t.value.memberPriceList,(function(e,i){return a("div",{key:i,class:{littleMargin:0!==i}},[t._v(" "+t._s(e.memberLevelName)+"： "),a("el-input",{staticStyle:{width:"200px"},model:{value:e.memberPrice,callback:function(a){t.$set(e,"memberPrice",a)},expression:"item.memberPrice"}})],1)})),0),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===t.value.promotionType,expression:"value.promotionType===3"}]},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productLadderList,border:""}},[a("el-table-column",{attrs:{label:"数量",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.count,callback:function(a){t.$set(e.row,"count",a)},expression:"scope.row.count"}})]}}])}),a("el-table-column",{attrs:{label:"折扣",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.discount,callback:function(a){t.$set(e.row,"discount",a)},expression:"scope.row.discount"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleRemoveProductLadder(e.$index,e.row)}}},[t._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleAddProductLadder(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:4===t.value.promotionType,expression:"value.promotionType===4"}]},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productFullReductionList,border:""}},[a("el-table-column",{attrs:{label:"满",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.fullPrice,callback:function(a){t.$set(e.row,"fullPrice",a)},expression:"scope.row.fullPrice"}})]}}])}),a("el-table-column",{attrs:{label:"立减",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.reducePrice,callback:function(a){t.$set(e.row,"reducePrice",a)},expression:"scope.row.reducePrice"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleRemoveFullReduction(e.$index,e.row)}}},[t._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleAddFullReduction(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品信息")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，填写商品属性")])],1)],1)],1)},v=[],b=(a("ac1f"),a("1276"),a("a9e3"),a("8a79"),a("a434"),a("b775"));function g(t){return Object(b["a"])({url:"/memberLevel/list",method:"get",params:t})}var y={name:"ProductSaleDetail",props:{value:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()<Date.now()}}}},computed:{selectServiceList:{get:function(){var t=[];if(void 0===this.value.serviceIds||null==this.value.serviceIds||""===this.value.serviceIds)return t;for(var e=this.value.serviceIds.split(","),a=0;a<e.length;a++)t.push(Number(e[a]));return t},set:function(t){var e="";if(null!=t&&t.length>0){for(var a=0;a<t.length;a++)e+=t[a]+",";e.endsWith(",")&&(e=e.substr(0,e.length-1)),this.value.serviceIds=e}else this.value.serviceIds=null}}},created:function(){var t=this;this.isEdit||g({defaultStatus:0}).then((function(e){for(var a=[],i=0;i<e.data.length;i++){var r=e.data[i];a.push({memberLevelId:r.id,memberLevelName:r.name})}t.value.memberPriceList=a}))},methods:{handleEditCreated:function(){var t=this.value.serviceIds.split(",");console.log("handleEditCreated",t);for(var e=0;e<t.length;e++)this.selectServiceList.push(Number(t[e]))},handleRemoveProductLadder:function(t,e){var a=this.value.productLadderList;1===a.length?(a.pop(),a.push({count:0,discount:0,price:0})):a.splice(t,1)},handleAddProductLadder:function(t,e){var a=this.value.productLadderList;a.length<3?a.push({count:0,discount:0,price:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handleRemoveFullReduction:function(t,e){var a=this.value.productFullReductionList;1===a.length?(a.pop(),a.push({fullPrice:0,reducePrice:0})):a.splice(t,1)},handleAddFullReduction:function(t,e){var a=this.value.productFullReductionList;a.length<3?a.push({fullPrice:0,reducePrice:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")}}},k=y,P=(a("a068"),Object(p["a"])(k,f,v,!1,null,"70c07a6d",null)),S=P.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productAttrForm",staticStyle:{width:"720px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"属性类型："}},[a("el-select",{attrs:{placeholder:"请选择属性类型"},on:{change:t.handleProductAttrChange},model:{value:t.value.productAttributeCategoryId,callback:function(e){t.$set(t.value,"productAttributeCategoryId",e)},expression:"value.productAttributeCategoryId"}},t._l(t.productAttributeCategoryOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"商品规格："}},[a("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttr,(function(e,i){return a("div",{key:i},[t._v(" "+t._s(e.name)+"： "),0===e.handAddStatus?a("el-checkbox-group",{model:{value:t.selectProductAttr[i].values,callback:function(e){t.$set(t.selectProductAttr[i],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.getInputListArr(e.inputList),(function(e){return a("el-checkbox",{key:e,staticClass:"littleMarginLeft",attrs:{label:e},on:{change:t.checkboxClick}})})),1):a("div",[a("el-checkbox-group",{model:{value:t.selectProductAttr[i].values,callback:function(e){t.$set(t.selectProductAttr[i],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.selectProductAttr[i].options,(function(e,r){return a("div",{key:r,staticClass:"littleMarginLeft",staticStyle:{display:"inline-block"}},[a("el-checkbox",{key:e,attrs:{label:e}}),a("el-button",{staticClass:"littleMarginLeft",attrs:{type:"text"},on:{click:function(e){return t.handleRemoveProductAttrValue(i,r)}}},[t._v("删除 ")])],1)})),0),a("el-input",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{clearable:""},model:{value:t.addProductAttrValue,callback:function(e){t.addProductAttrValue=e},expression:"addProductAttrValue"}}),a("el-button",{staticClass:"littleMarginLeft",on:{click:function(e){return t.handleAddProductAttrValue(i)}}},[t._v("增加")])],1)],1)})),0),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.value.skuStockList,border:""}},[t._l(t.selectProductAttr,(function(e,i){return a("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getProductSkuSp(e.row,i))+" ")]}}],null,!0)})})),a("el-table-column",{attrs:{label:"销售价格",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"商品库存",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"库存预警值",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])}),a("el-table-column",{attrs:{label:"SKU编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleRemoveProductSku(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],2),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleRefreshProductSkuList}},[t._v("刷新列表 ")]),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuPrice}},[t._v("同步价格 ")]),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuStock}},[t._v("同步库存 ")])],1),t.hasAttrPic?a("el-form-item",{attrs:{label:"属性图片："}},[a("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttrPics,(function(e,i){return a("div",{key:i},[a("span",[t._v(t._s(e.name)+":")]),a("single-upload",{staticStyle:{width:"300px",display:"inline-block","margin-left":"10px"},model:{value:e.pic,callback:function(a){t.$set(e,"pic",a)},expression:"item.pic"}})],1)})),0)],1):t._e(),a("el-form-item",{attrs:{label:"商品参数："}},[a("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductParam,(function(e,i){return a("div",{key:i,class:{littleMarginTop:0!==i}},[a("div",{staticClass:"paramInputLabel"},[t._v(t._s(e.name)+":")]),1===e.inputType?a("el-select",{staticClass:"paramInput",model:{value:t.selectProductParam[i].value,callback:function(e){t.$set(t.selectProductParam[i],"value",e)},expression:"selectProductParam[index].value"}},t._l(t.getParamInputList(e.inputList),(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1):a("el-input",{staticClass:"paramInput",model:{value:t.selectProductParam[i].value,callback:function(e){t.$set(t.selectProductParam[i],"value",e)},expression:"selectProductParam[index].value"}})],1)})),0)],1),a("el-form-item",{attrs:{label:"商品相册："}},[a("multi-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),a("el-form-item",{attrs:{label:"规格参数："}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeHtmlName,callback:function(e){t.activeHtmlName=e},expression:"activeHtmlName"}},[a("el-tab-pane",{attrs:{label:"电脑端详情",name:"pc"}},[a("tinymce",{attrs:{width:595,height:300},model:{value:t.value.detailHtml,callback:function(e){t.$set(t.value,"detailHtml",e)},expression:"value.detailHtml"}})],1),a("el-tab-pane",{attrs:{label:"移动端详情",name:"mobile"}},[a("tinymce",{attrs:{width:595,height:300},model:{value:t.value.detailMobileHtml,callback:function(e){t.$set(t.value,"detailMobileHtml",e)},expression:"value.detailMobileHtml"}})],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品促销")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，选择商品关联")])],1)],1)],1)},x=[],O=a("ade3"),L=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("a630"),a("99af"),a("b64b"),a("d81d"),a("159b"),a("5e35")),A=a("c8aa"),j=a("0f39"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview,limit:t.maxCount,"on-exceed":t.handleExceed}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},_=[],I=a("6e0d"),$={name:"MultiUpload",props:{value:{type:Array,default:function(){return[]}},maxCount:{type:Number,default:5}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,dialogImageUrl:null,useOss:!1,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"/minio/upload"}},computed:{fileList:function(){for(var t=[],e=0;e<this.value.length;e++)t.push({url:this.value[e]});return t}},methods:{emitInput:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].url);this.$emit("input",e)},handleRemove:function(t,e){this.emitInput(e)},handlePreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},beforeUpload:function(t){var e=this;return!this.useOss||new Promise((function(t,a){Object(I["a"])().then((function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)})).catch((function(t){console.log(t),a(!1)}))}))},handleUploadSuccess:function(t,e){var a=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(a=t.data.url),this.fileList.push({name:e.name,url:a}),this.emitInput(this.fileList)},handleExceed:function(t,e){this.$message({message:"最多只能上传"+this.maxCount+"张图片",type:"warning",duration:1e3})}}},E=$,T=Object(p["a"])(E,C,_,!1,null,null,null),R=T.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),a("div",{staticClass:"editor-custom-btn-container"},[a("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},N=[],U=(a("b680"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 上传 ")]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:t.url,"list-type":"picture-card"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" 点击上传 ")])],1),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 确定 ")])],1)],1)}),B=[],z=(a("2b3d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},url:"/minio/upload",fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var a=e.uid,i=Object.keys(this.listObj),r=0,n=i.length;r<n;r++)if(this.listObj[i[r]].uid===a)return this.listObj[i[r]].url=t.data.url,void(this.listObj[i[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,a=Object.keys(this.listObj),i=0,r=a.length;i<r;i++)if(this.listObj[a[i]].uid===e)return void delete this.listObj[a[i]]},beforeUpload:function(t){var e=this,a=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(r,n){var l=new Image;l.src=a.createObjectURL(t),l.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),D=z,F=(a("e698"),Object(p["a"])(D,U,B,!1,null,"fded75cc",null)),M=F.exports,q=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],H=q,K=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],J=K,G=a("b85c"),W=[];function X(){return window.tinymce}var Q=function(t,e){var a=document.getElementById(t),i=e||function(){};if(!a){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),W.push(i);var n="onload"in r?l:u;n(r)}function l(e){e.onload=function(){this.onerror=this.onload=null;var t,a=Object(G["a"])(W);try{for(a.s();!(t=a.n()).done;){var i=t.value;i(null,e)}}catch(r){a.e(r)}finally{a.f()}W=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function u(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,a=Object(G["a"])(W);try{for(a.s();!(e=a.n()).done;){var i=e.value;i(null,t)}}catch(r){a.e(r)}finally{a.f()}W=null}}}a&&i&&(X()?i(null,a):W.push(i))},Y=Q,Z="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",tt={name:"Tinymce",components:{editorImage:M},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;Y(Z,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:J,menubar:this.menubar,plugins:H,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",a.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},et=tt,at=(a("bed7"),Object(p["a"])(et,V,N,!1,null,"d1b0fb02",null)),it=at.exports,rt={name:"ProductAttrDetail",components:{SingleUpload:j["a"],MultiUpload:R,Tinymce:it},props:{value:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,productAttributeCategoryOptions:[],selectProductAttr:[],selectProductParam:[],selectProductAttrPics:[],addProductAttrValue:"",activeHtmlName:"pc"}},computed:{hasAttrPic:function(){return!(this.selectProductAttrPics.length<1)},productId:function(){return this.value.id},selectProductPics:{get:function(){var t=[];if(void 0===this.value.pic||null==this.value.pic||""===this.value.pic)return t;if(t.push(this.value.pic),void 0===this.value.albumPics||null==this.value.albumPics||""===this.value.albumPics)return t;for(var e=this.value.albumPics.split(","),a=0;a<e.length;a++)t.push(e[a]);return t},set:function(t){if(null==t||0===t.length)this.value.pic=null,this.value.albumPics=null;else if(this.value.pic=t[0],this.value.albumPics="",t.length>1)for(var e=1;e<t.length;e++)this.value.albumPics+=t[e],e!==t.length-1&&(this.value.albumPics+=",")}}},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},created:function(){this.getProductAttrCateList()},methods:{checkboxClick:function(t){this.refreshProductSkuList()},refreshProductSku:function(){},handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId),this.hasEditCreated=!0},getProductAttrCateList:function(){var t=this,e={pageNum:1,pageSize:100};Object(L["c"])(e).then((function(e){t.productAttributeCategoryOptions=[];for(var a=e.data.list,i=0;i<a.length;i++)t.productAttributeCategoryOptions.push({label:a[i].name,value:a[i].id})}))},getProductAttrList:function(t,e){var a=this,i={pageNum:1,pageSize:100,type:t};Object(A["c"])(e,i).then((function(e){var i=e.data.list;if(0===t){a.selectProductAttr=[];for(var r=0;r<i.length;r++){var n=[],l=[];a.isEdit&&(1===i[r].handAddStatus&&(n=a.getEditAttrOptions(i[r].id)),l=a.getEditAttrValues(r)),a.selectProductAttr.push({id:i[r].id,name:i[r].name,handAddStatus:i[r].handAddStatus,inputList:i[r].inputList,values:l,options:n})}a.isEdit&&a.refreshProductAttrPics()}else{a.selectProductParam=[];for(var u=0;u<i.length;u++){var o=null;a.isEdit&&(o=a.getEditParamValue(i[u].id)),a.selectProductParam.push({id:i[u].id,name:i[u].name,value:o,inputType:i[u].inputType,inputList:i[u].inputList})}}}))},getEditAttrOptions:function(t){for(var e=[],a=0;a<this.value.productAttributeValueList.length;a++){var i=this.value.productAttributeValueList[a];if(i.productAttributeId===t){for(var r=i.value.split(","),n=0;n<r.length;n++)e.push(r[n]);break}}return e},getEditAttrValues:function(t){var e=new Set;if(0===t)for(var a=0;a<this.value.skuStockList.length;a++){var i=this.value.skuStockList[a],r=JSON.parse(i.spData);null!=r&&r.length>=1&&e.add(r[0].value)}else if(1===t)for(var n=0;n<this.value.skuStockList.length;n++){var l=this.value.skuStockList[n],u=JSON.parse(l.spData);null!=u&&u.length>=2&&e.add(u[1].value)}else for(var o=0;o<this.value.skuStockList.length;o++){var s=this.value.skuStockList[o],c=JSON.parse(s.spData);null!=c&&c.length>=3&&e.add(c[2].value)}return Array.from(e)},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleProductAttrChange:function(t){this.getProductAttrList(0,t),this.getProductAttrList(1,t)},getInputListArr:function(t){return t.split(",")},handleAddProductAttrValue:function(t){var e=this.selectProductAttr[t].options;null!=this.addProductAttrValue&&""!==this.addProductAttrValue?-1===e.indexOf(this.addProductAttrValue)?(this.selectProductAttr[t].options.push(this.addProductAttrValue),this.addProductAttrValue=null):this.$message({message:"属性值不能重复",type:"warning",duration:1e3}):this.$message({message:"属性值不能为空",type:"warning",duration:1e3})},handleRemoveProductAttrValue:function(t,e){this.selectProductAttr[t].options.splice(e,1)},getProductSkuSp:function(t,e){var a=JSON.parse(t.spData);return null!=a&&e<a.length?a[e].value:null},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.refreshProductAttrPics(),t.refreshProductSkuList()}))},handleSyncProductSkuPrice:function(){var t=this;this.$confirm("将同步第一个sku的价格到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0){var e=[];e=e.concat(e,t.value.skuStockList);for(var a=t.value.skuStockList[0].price,i=0;i<e.length;i++)e[i].price=a;t.value.skuStockList=[],t.value.skuStockList=t.value.skuStockList.concat(t.value.skuStockList,e)}}))},handleSyncProductSkuStock:function(){var t=this;this.$confirm("将同步第一个sku的库存到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0){var e=[];e=e.concat(e,t.value.skuStockList);for(var a=t.value.skuStockList[0].stock,i=t.value.skuStockList[0].lowStock,r=0;r<e.length;r++)e[r].stock=a,e[r].lowStock=i;t.value.skuStockList=[],t.value.skuStockList=t.value.skuStockList.concat(t.value.skuStockList,e)}}))},handleStrr:function(t){var e=this,a=Object.keys(t).reduce((function(e,a){return t[a].reduce((function(t,i){return e.length?t.concat(e.map((function(t){return Object.assign({},t,Object(O["a"])({},a,i))}))):t.concat(Object(O["a"])({},a,i))}),[])}),[]),i=[];return a.forEach((function(t){var a=[];e._.forEach(t,(function(t,e){a.push({key:e,value:t})})),i.push({spData:JSON.stringify(a)})})),i},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList,e={};if(this.selectProductAttr.forEach((function(t){t.values.length>0&&(e[t.name]=t.values)})),1===this.selectProductAttr.length)for(var a=this.selectProductAttr[0],i=0;i<a.values.length;i++)t.push({spData:JSON.stringify([{key:a.name,value:a.values[i]}])});else this.value.skuStockList=this.handleStrr(e)},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.selectProductAttr.length>=1)for(var t=this.selectProductAttr[0].values,e=0;e<t.length;e++){var a=null;this.isEdit&&(a=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:a})}},getProductSkuPic:function(t){for(var e=0;e<this.value.skuStockList.length;e++){var a=JSON.parse(this.value.skuStockList[e].spData);if(t===a[0].value)return this.value.skuStockList[e].pic}return null},mergeProductAttrValue:function(){this.value.productAttributeValueList=[];for(var t=0;t<this.selectProductAttr.length;t++){var e=this.selectProductAttr[t];1===e.handAddStatus&&null!=e.options&&e.options.length>0&&this.value.productAttributeValueList.push({productAttributeId:e.id,value:this.getOptionStr(e.options)})}for(var a=0;a<this.selectProductParam.length;a++){var i=this.selectProductParam[a];this.value.productAttributeValueList.push({productAttributeId:i.id,value:i.value})}},mergeProductAttrPics:function(){for(var t=0;t<this.selectProductAttrPics.length;t++)for(var e=0;e<this.value.skuStockList.length;e++){var a=JSON.parse(this.value.skuStockList[e].spData);a[0].value===this.selectProductAttrPics[t].name&&(this.value.skuStockList[e].pic=this.selectProductAttrPics[t].pic)}},getOptionStr:function(t){for(var e="",a=0;a<t.length;a++)e+=t[a],a!==t.length-1&&(e+=",");return e},handleRemoveProductSku:function(t,e){var a=this.value.skuStockList;1===a.length?a.pop():a.splice(t,1)},getParamInputList:function(t){return t.split(",")},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.mergeProductAttrValue(),this.mergeProductAttrPics(),this.$emit("nextStep")}}},nt=rt,lt=(a("0b59"),Object(p["a"])(nt,w,x,!1,null,"3932acc2",null)),ut=lt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productRelationForm",staticStyle:{width:"680px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"关联专题："}},[a("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入专题名称",titles:t.subjectTitles,data:t.subjectList},model:{value:t.selectSubject,callback:function(e){t.selectSubject=e},expression:"selectSubject"}})],1),a("el-form-item",{attrs:{label:"关联优选："}},[a("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入优选名称",titles:t.prefrenceAreaTitles,data:t.prefrenceAreaList},model:{value:t.selectPrefrenceArea,callback:function(e){t.selectPrefrenceArea=e},expression:"selectPrefrenceArea"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品属性")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleFinishCommit}},[t._v("完成，提交商品")])],1)],1)],1)},st=[],ct=a("c418");function dt(){return Object(b["a"])({url:"/prefrenceArea/listAll",method:"get"})}var pt={name:"ProductRelationDetail",props:{value:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},data:function(){return{subjectList:[],subjectTitles:["待选择","已选择"],prefrenceAreaList:[],prefrenceAreaTitles:["待选择","已选择"]}},computed:{selectSubject:{get:function(){var t=[];if(null==this.value.subjectProductRelationList||this.value.subjectProductRelationList.length<=0)return t;for(var e=0;e<this.value.subjectProductRelationList.length;e++)t.push(this.value.subjectProductRelationList[e].subjectId);return t},set:function(t){this.value.subjectProductRelationList=[];for(var e=0;e<t.length;e++)this.value.subjectProductRelationList.push({subjectId:t[e]})}},selectPrefrenceArea:{get:function(){var t=[];if(null==this.value.prefrenceAreaProductRelationList||this.value.prefrenceAreaProductRelationList.length<=0)return t;for(var e=0;e<this.value.prefrenceAreaProductRelationList.length;e++)t.push(this.value.prefrenceAreaProductRelationList[e].prefrenceAreaId);return t},set:function(t){this.value.prefrenceAreaProductRelationList=[];for(var e=0;e<t.length;e++)this.value.prefrenceAreaProductRelationList.push({prefrenceAreaId:t[e]})}}},created:function(){this.getSubjectList(),this.getPrefrenceAreaList()},methods:{filterMethod:function(t,e){return e.label.indexOf(t)>-1},getSubjectList:function(){var t=this;Object(ct["b"])().then((function(e){for(var a=e.data,i=0;i<a.length;i++)t.subjectList.push({label:a[i].title,key:a[i].id})}))},getPrefrenceAreaList:function(){var t=this;dt().then((function(e){for(var a=e.data,i=0;i<a.length;i++)t.prefrenceAreaList.push({label:a[i].name,key:a[i].id})}))},handlePrev:function(){this.$emit("prevStep")},handleFinishCommit:function(){this.$emit("finishCommit",this.isEdit)}}},ht=pt,mt=Object(p["a"])(ht,ot,st,!1,null,"13110282",null),ft=mt.exports,vt=a("c4c8"),bt={albumPics:"",brandId:null,brandName:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:0,flashPromotionCount:0,flashPromotionId:0,flashPromotionPrice:0,flashPromotionSort:0,giftPoint:0,giftGrowth:0,keywords:"",lowStock:0,name:"",newStatus:0,note:"",originalPrice:0,pic:"",memberPriceList:[],productFullReductionList:[{fullPrice:0,reducePrice:0}],productLadderList:[{count:0,discount:0,price:0}],previewStatus:0,price:0,productAttributeCategoryId:null,productAttributeValueList:[],skuStockList:[],subjectProductRelationList:[],prefrenceAreaProductRelationList:[],productCategoryId:null,productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:null,promotionStartTime:"",promotionType:0,publishStatus:0,recommandStatus:0,sale:0,serviceIds:"",sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:0,weight:0},gt={name:"ProductDetail",components:{ProductInfoDetail:m,ProductSaleDetail:S,ProductAttrDetail:ut,ProductRelationDetail:ft},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:Object.assign({},bt),showStatus:[!0,!1,!1,!1]}},created:function(){var t=this;this.isEdit&&Object(vt["d"])(this.$route.query.id).then((function(e){t.productParam=e.data}))},methods:{hideAll:function(){for(var t=0;t<this.showStatus.length;t++)this.showStatus[t]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(t){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t?Object(vt["g"])(e.$route.query.id,e.productParam).then((function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),e.$router.back()})):Object(vt["a"])(e.productParam).then((function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),location.reload()}))}))}}},yt=gt,kt=(a("8705"),Object(p["a"])(yt,i,r,!1,null,null,null));e["a"]=kt.exports},"5e35":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"d",(function(){return o}));var i=a("b775");function r(t){return Object(i["a"])({url:"/productAttribute/category/list",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/productAttribute/category/create",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/productAttribute/category/delete/"+t,method:"get"})}function u(t,e){return Object(i["a"])({url:"/productAttribute/category/update/"+t,method:"post",data:e})}function o(){return Object(i["a"])({url:"/productAttribute/category/list/withAttr",method:"get"})}},"6e0d":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("b775");function r(){return Object(i["a"])({url:"/aliyun/oss/policy",method:"get"})}},8674:function(t,e,a){},8705:function(t,e,a){"use strict";a("f236")},"978c":function(t,e,a){},"9add":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return c}));var i=a("b775");function r(t){return Object(i["a"])({url:"/brand/list",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/brand/create",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/brand/update/showStatus",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/brand/update/factoryStatus",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/brand/delete/"+t,method:"get"})}function s(t){return Object(i["a"])({url:"/brand/"+t,method:"get"})}function c(t,e){return Object(i["a"])({url:"/brand/update/"+t,method:"post",data:e})}},a068:function(t,e,a){"use strict";a("8674")},b183:function(t,e,a){},bed7:function(t,e,a){"use strict";a("978c")},c418:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return n}));var i=a("b775");function r(){return Object(i["a"])({url:"/subject/listAll",method:"get"})}function n(t){return Object(i["a"])({url:"/subject/list",method:"get",params:t})}},c4c8:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"i",(function(){return o})),a.d(e,"h",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"d",(function(){return p}));var i=a("b775");function r(t){return Object(i["a"])({url:"/product/list",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/product/simpleList",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/product/update/deleteStatus",method:"post",params:t})}function u(t){return Object(i["a"])({url:"/product/update/newStatus",method:"post",params:t})}function o(t){return Object(i["a"])({url:"/product/update/recommendStatus",method:"post",params:t})}function s(t){return Object(i["a"])({url:"/product/update/publishStatus",method:"post",params:t})}function c(t){return Object(i["a"])({url:"/product/create",method:"post",data:t})}function d(t,e){return Object(i["a"])({url:"/product/update/"+t,method:"post",data:e})}function p(t){return Object(i["a"])({url:"/product/updateInfo/"+t,method:"get"})}},c8aa:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return s}));var i=a("b775");function r(t,e){return Object(i["a"])({url:"/productAttribute/list/"+t,method:"get",params:e})}function n(t){return Object(i["a"])({url:"/productAttribute/delete",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/productAttribute/create",method:"post",data:t})}function u(t,e){return Object(i["a"])({url:"/productAttribute/update/"+t,method:"post",data:e})}function o(t){return Object(i["a"])({url:"/productAttribute/"+t,method:"get"})}function s(t){return Object(i["a"])({url:"/productAttribute/attrInfo/"+t,method:"get"})}},d1f3:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"e",(function(){return o})),a.d(e,"h",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return d}));var i=a("b775");function r(t,e){return Object(i["a"])({url:"/productCategory/list/"+t,method:"get",params:e})}function n(t){return Object(i["a"])({url:"/productCategory/delete/"+t,method:"post"})}function l(t){return Object(i["a"])({url:"/productCategory/create",method:"post",data:t})}function u(t,e){return Object(i["a"])({url:"/productCategory/update/"+t,method:"post",data:e})}function o(t){return Object(i["a"])({url:"/productCategory/"+t,method:"get"})}function s(t){return Object(i["a"])({url:"/productCategory/update/showStatus",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/productCategory/update/navStatus",method:"post",data:t})}function d(){return Object(i["a"])({url:"/productCategory/list/withChildren",method:"get"})}},e698:function(t,e,a){"use strict";a("b183")},f236:function(t,e,a){}}]);